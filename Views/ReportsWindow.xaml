<Window x:Class="MyPOS99.Views.ReportsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MyPOS99.Converters"
        Title="Reports - MyPOS99" 
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#F5F6FA">

    <Window.Resources>
        <local:StringEqualsToVisibilityConverter x:Key="ReportTypeConverter"/>
        
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2980B9"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="#27AE60"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#229954"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="WarningButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="#F39C12"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E67E22"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal">
                    <Image Source="/Logo.png" 
                           Width="45" 
                           Height="45" 
                           Margin="0,0,15,0"
                           VerticalAlignment="Center"
                           Stretch="Uniform"
                           RenderOptions.BitmapScalingMode="HighQuality"/>
                    <StackPanel>
                        <TextBlock Text="Reports &amp; Analytics" FontSize="28" FontWeight="Bold" Foreground="#2C3E50"/>
                        <TextBlock Text="Generate and export comprehensive business reports" FontSize="14" Foreground="#7F8C8D"/>
                    </StackPanel>
                </StackPanel>

                <Button Grid.Column="2" Content="Close" Click="CloseButton_Click"
                        Background="#95A5A6" Foreground="White" Padding="20,10"
                        BorderThickness="0" Cursor="Hand"/>
            </Grid>
        </Border>

        <!-- Filters & Controls -->
        <Border Grid.Row="1" Background="White" CornerRadius="12" Padding="20" Margin="0,0,0,20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Report Type Selection -->
                <Grid Grid.Row="0" Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Report Type:" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    <ComboBox Grid.Column="1" ItemsSource="{Binding ReportTypes}" 
                              SelectedItem="{Binding SelectedReportType}"
                              FontSize="14" Padding="10"/>
                </Grid>

                <!-- Date Filters -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Date Range Filter -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Visibility="{Binding ShowDateRange, Converter={StaticResource BoolToVisibilityConverter}}">
                        <TextBlock Text="From:" FontSize="14" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <DatePicker SelectedDate="{Binding FromDate}" Width="150" Margin="0,0,20,0"/>
                        <TextBlock Text="To:" FontSize="14" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <DatePicker SelectedDate="{Binding ToDate}" Width="150"/>
                    </StackPanel>

                    <!-- Single Date Filter -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Visibility="{Binding ShowSingleDate, Converter={StaticResource BoolToVisibilityConverter}}">
                        <TextBlock Text="Date:" FontSize="14" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <DatePicker SelectedDate="{Binding FromDate}" Width="150"/>
                    </StackPanel>

                    <!-- Year Filter -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Visibility="{Binding ShowYearSelector, Converter={StaticResource BoolToVisibilityConverter}}">
                        <TextBlock Text="Year:" FontSize="14" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <ComboBox ItemsSource="{Binding AvailableYears}" SelectedItem="{Binding SelectedYear}" Width="150"/>
                    </StackPanel>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="?? Generate Report" Command="{Binding GenerateReportCommand}" 
                                Style="{StaticResource SuccessButton}"/>
                        <Button Content="?? Export PDF" Command="{Binding ExportToPdfCommand}" 
                                Style="{StaticResource ActionButton}"/>
                        <Button Content="?? Export Excel" Command="{Binding ExportToExcelCommand}" 
                                Style="{StaticResource WarningButton}"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <!-- Report Content Area -->
        <Border Grid.Row="2" Background="White" CornerRadius="12" Padding="20">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <Grid>
                    <!-- Daily Sales Report -->
                    <DataGrid ItemsSource="{Binding DailySalesData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Daily Sales"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat=dd/MM/yyyy}" Width="100"/>
                            <DataGridTextColumn Header="Trans" Binding="{Binding TotalTransactions}" Width="70"/>
                            <DataGridTextColumn Header="Total Sales" Binding="{Binding TotalSales, StringFormat=?{0:N2}}" Width="110"/>
                            <DataGridTextColumn Header="Discount" Binding="{Binding TotalDiscount, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Net Sales" Binding="{Binding NetSales, StringFormat=?{0:N2}}" Width="110"/>
                            <DataGridTextColumn Header="Cash" Binding="{Binding CashSales, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Card" Binding="{Binding CardSales, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Mobile" Binding="{Binding MobileSales, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Credit" Binding="{Binding CreditSales, StringFormat=?{0:N2}}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Stock Report -->
                    <DataGrid ItemsSource="{Binding StockData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Stock Report"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Code" Binding="{Binding ProductCode}" Width="80"/>
                            <DataGridTextColumn Header="Product" Binding="{Binding ProductName}" Width="*"/>
                            <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120"/>
                            <DataGridTextColumn Header="Supplier" Binding="{Binding SupplierName}" Width="120"/>
                            <DataGridTextColumn Header="Stock" Binding="{Binding StockQty}" Width="70"/>
                            <DataGridTextColumn Header="Min" Binding="{Binding MinStockLevel}" Width="60"/>
                            <DataGridTextColumn Header="Cost" Binding="{Binding CostPrice, StringFormat=?{0:N2}}" Width="90"/>
                            <DataGridTextColumn Header="Sell" Binding="{Binding SellPrice, StringFormat=?{0:N2}}" Width="90"/>
                            <DataGridTextColumn Header="Value" Binding="{Binding StockValue, StringFormat=?{0:N2}}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Low Stock Report -->
                    <DataGrid ItemsSource="{Binding LowStockData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Low Stock Report"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Code" Binding="{Binding ProductCode}" Width="80"/>
                            <DataGridTextColumn Header="Product" Binding="{Binding ProductName}" Width="*"/>
                            <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120"/>
                            <DataGridTextColumn Header="Supplier" Binding="{Binding SupplierName}" Width="150"/>
                            <DataGridTextColumn Header="Current" Binding="{Binding CurrentStock}" Width="80"/>
                            <DataGridTextColumn Header="Min" Binding="{Binding MinStockLevel}" Width="60"/>
                            <DataGridTextColumn Header="Deficit" Binding="{Binding Deficit}" Width="80"/>
                            <DataGridTextColumn Header="Reorder Value" Binding="{Binding ReorderValue, StringFormat=?{0:N2}}" Width="120"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Purchase Report -->
                    <DataGrid ItemsSource="{Binding PurchaseData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Purchase Report"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Purchase #" Binding="{Binding PurchaseNumber}" Width="110"/>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat=dd/MM/yyyy}" Width="100"/>
                            <DataGridTextColumn Header="Supplier" Binding="{Binding SupplierName}" Width="*"/>
                            <DataGridTextColumn Header="Total" Binding="{Binding Total, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Paid" Binding="{Binding AmountPaid, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Due" Binding="{Binding AmountDue, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding PaymentStatus}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Monthly Sales Report -->
                    <DataGrid ItemsSource="{Binding MonthlySalesData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Monthly Sales"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Month" Binding="{Binding MonthName}" Width="120"/>
                            <DataGridTextColumn Header="Transactions" Binding="{Binding TotalTransactions}" Width="110"/>
                            <DataGridTextColumn Header="Sales" Binding="{Binding TotalSales, StringFormat=?{0:N2}}" Width="*"/>
                            <DataGridTextColumn Header="Gross Profit" Binding="{Binding GrossProfit, StringFormat=?{0:N2}}" Width="*"/>
                            <DataGridTextColumn Header="Expenses" Binding="{Binding Expenses, StringFormat=?{0:N2}}" Width="*"/>
                            <DataGridTextColumn Header="Net Profit" Binding="{Binding NetProfit, StringFormat=?{0:N2}}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Accounts Payable -->
                    <DataGrid ItemsSource="{Binding PayablesData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Accounts Payable"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Supplier" Binding="{Binding SupplierName}" Width="*"/>
                            <DataGridTextColumn Header="Purchases" Binding="{Binding TotalPurchases}" Width="100"/>
                            <DataGridTextColumn Header="Total" Binding="{Binding TotalPurchaseAmount, StringFormat=?{0:N2}}" Width="120"/>
                            <DataGridTextColumn Header="Paid" Binding="{Binding TotalPaid, StringFormat=?{0:N2}}" Width="120"/>
                            <DataGridTextColumn Header="Due" Binding="{Binding TotalDue, StringFormat=?{0:N2}}" Width="120"/>
                            <DataGridTextColumn Header="Overdue Days" Binding="{Binding OverdueDays}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Accounts Receivable -->
                    <DataGrid ItemsSource="{Binding ReceivablesData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Accounts Receivable"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" Width="*"/>
                            <DataGridTextColumn Header="Phone" Binding="{Binding Phone}" Width="120"/>
                            <DataGridTextColumn Header="Credit Limit" Binding="{Binding CreditLimit, StringFormat=?{0:N2}}" Width="120"/>
                            <DataGridTextColumn Header="Current" Binding="{Binding CurrentCredit, StringFormat=?{0:N2}}" Width="120"/>
                            <DataGridTextColumn Header="Available" Binding="{Binding AvailableCredit, StringFormat=?{0:N2}}" Width="120"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Sales Detail -->
                    <DataGrid ItemsSource="{Binding SalesDetailData}" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True">
                        <DataGrid.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Sales Detail"/>
                        </DataGrid.Visibility>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Invoice" Binding="{Binding InvoiceNumber}" Width="110"/>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat=dd/MM/yyyy HH:mm}" Width="140"/>
                            <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" Width="*"/>
                            <DataGridTextColumn Header="Payment" Binding="{Binding PaymentType}" Width="90"/>
                            <DataGridTextColumn Header="Total" Binding="{Binding Total, StringFormat=?{0:N2}}" Width="100"/>
                            <DataGridTextColumn Header="Cashier" Binding="{Binding Cashier}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Profit & Loss Report -->
                    <StackPanel Margin="20">
                        <StackPanel.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Profit &amp; Loss"/>
                        </StackPanel.Visibility>

                        <TextBlock Text="PROFIT &amp; LOSS STATEMENT" FontSize="24" FontWeight="Bold" Margin="0,0,0,10" Foreground="#2C3E50"/>
                        <TextBlock DataContext="{Binding ProfitLossData}" FontSize="14" Foreground="#7F8C8D" Margin="0,0,0,30">
                            <Run Text="Period: "/>
                            <Run Text="{Binding StartDate, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                            <Run Text=" to "/>
                            <Run Text="{Binding EndDate, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                        </TextBlock>

                        <Grid DataContext="{Binding ProfitLossData}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Revenue Section -->
                            <Border Grid.Row="0" Grid.ColumnSpan="2" Background="#E8F5E9" Padding="15,10" Margin="0,0,0,15" CornerRadius="6">
                                <TextBlock Text="REVENUE" FontSize="16" FontWeight="Bold" Foreground="#27AE60"/>
                            </Border>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Total Revenue" FontSize="14" Margin="20,5"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding TotalRevenue, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Less: Discounts" FontSize="14" Margin="20,5"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Discounts, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" Foreground="#E74C3C"/>

                            <Separator Grid.Row="3" Grid.ColumnSpan="2" Margin="0,10"/>

                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Net Revenue" FontSize="16" FontWeight="Bold" Margin="0,5"/>
                            <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding NetRevenue, StringFormat=?{0:N2}}" FontSize="16" FontWeight="Bold" HorizontalAlignment="Right"/>

                            <TextBlock Grid.Row="5" Grid.Column="0" Text="Cost of Goods Sold" FontSize="14" Margin="20,15,0,5"/>
                            <TextBlock Grid.Row="5" Grid.Column="1" Text="{Binding CostOfGoodsSold, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" Foreground="#E74C3C"/>

                            <Border Grid.Row="6" Grid.ColumnSpan="2" Background="#E8F5E9" Padding="15" Margin="0,10" CornerRadius="6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="GROSS PROFIT" FontSize="18" FontWeight="Bold" Foreground="#27AE60"/>
                                        <TextBlock Text="{Binding GrossProfitMargin, StringFormat='Margin: {0:F2}%'}" FontSize="12" Foreground="#27AE60" Margin="0,5,0,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Column="1" Text="{Binding GrossProfit, StringFormat=?{0:N2}}" FontSize="20" FontWeight="Bold" Foreground="#27AE60" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>

                            <TextBlock Grid.Row="7" Grid.Column="0" Text="Operating Expenses" FontSize="14" Margin="20,15,0,5"/>
                            <TextBlock Grid.Row="7" Grid.Column="1" Text="{Binding TotalExpenses, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" Foreground="#E74C3C"/>

                            <Separator Grid.Row="8" Grid.ColumnSpan="2" Margin="0,10"/>

                            <Border Grid.Row="9" Grid.ColumnSpan="2" Background="#3498DB" Padding="20" CornerRadius="6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="NET PROFIT" FontSize="20" FontWeight="Bold" Foreground="White"/>
                                        <TextBlock Text="{Binding NetProfitMargin, StringFormat='Net Margin: {0:F2}%'}" FontSize="14" Foreground="White" Margin="0,5,0,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Column="1" Text="{Binding NetProfit, StringFormat=?{0:N2}}" FontSize="22" FontWeight="Bold" Foreground="White" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </StackPanel>

                    <!-- Daily Balance Report -->
                    <StackPanel Margin="20">
                        <StackPanel.Visibility>
                            <Binding Path="SelectedReportType" Converter="{StaticResource ReportTypeConverter}" ConverterParameter="Daily Balance"/>
                        </StackPanel.Visibility>

                        <TextBlock Text="DAILY BALANCE REPORT" FontSize="24" FontWeight="Bold" Margin="0,0,0,10" Foreground="#2C3E50"/>
                        <TextBlock Text="{Binding DailyBalanceData.Date, StringFormat='Date: {0:dd/MM/yyyy}'}" FontSize="14" Foreground="#7F8C8D" Margin="0,0,0,30"/>

                        <Border Background="#F8F9FA" CornerRadius="8" Padding="20" Margin="0,0,0,20">
                            <Grid DataContext="{Binding DailyBalanceData}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="SALES BREAKDOWN" FontSize="16" FontWeight="Bold" Margin="0,0,0,10" Foreground="#3498DB"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Cash Sales" FontSize="14" Margin="0,5"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding CashSales, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" FontWeight="SemiBold"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Card Sales" FontSize="14" Margin="0,5"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding CardSales, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" FontWeight="SemiBold"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Mobile Sales" FontSize="14" Margin="0,5"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding MobileSales, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" FontWeight="SemiBold"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Credit Sales" FontSize="14" Margin="0,5"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding CreditSales, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" FontWeight="SemiBold"/>

                                <Separator Grid.Row="5" Grid.ColumnSpan="2" Margin="0,10"/>

                                <TextBlock Grid.Row="6" Grid.Column="0" Text="Total Sales" FontSize="16" FontWeight="Bold" Margin="0,5" Foreground="#27AE60"/>
                                <TextBlock Grid.Row="6" Grid.Column="1" Text="{Binding TotalSales, StringFormat=?{0:N2}}" FontSize="16" FontWeight="Bold" HorizontalAlignment="Right" Foreground="#27AE60"/>

                                <TextBlock Grid.Row="7" Grid.Column="0" Text="Total Expenses" FontSize="14" Margin="0,15,0,5" Foreground="#E74C3C"/>
                                <TextBlock Grid.Row="7" Grid.Column="1" Text="{Binding TotalExpenses, StringFormat=?{0:N2}}" FontSize="14" HorizontalAlignment="Right" Foreground="#E74C3C" FontWeight="SemiBold"/>

                                <Separator Grid.Row="8" Grid.ColumnSpan="2" Margin="0,10"/>
                            </Grid>
                        </Border>

                        <Border Background="#3498DB" CornerRadius="8" Padding="20">
                            <Grid DataContext="{Binding DailyBalanceData}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="EXPECTED CASH IN HAND" FontSize="18" FontWeight="Bold" Foreground="White"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding ExpectedCashInHand, StringFormat=?{0:N2}}" FontSize="20" FontWeight="Bold" Foreground="White" HorizontalAlignment="Right"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="(Cash Sales - Expenses)" FontSize="12" Foreground="#ECF0F1" Margin="0,5,0,0"/>

                                <TextBlock Grid.Row="2" Grid.ColumnSpan="2" Text="?? Please count actual cash and compare with expected amount" 
                                           FontSize="11" Foreground="White" Margin="0,15,0,0" FontStyle="Italic" TextWrapping="Wrap"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
        </Border>

        <!-- Loading Overlay -->
        <Border Grid.RowSpan="3" Background="#80000000" Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="? Loading..." FontSize="24" Foreground="White" FontWeight="Bold"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
